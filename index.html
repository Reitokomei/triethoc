<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în thi Tri·∫øt h·ªçc & T∆∞ t∆∞·ªüng - Komei</title>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --secondary: #64748b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --bg-body: #0f172a; /* N·ªÅn t·ªëi m·∫∑c ƒë·ªãnh cho ng·∫ßu */
            --bg-card: #1e293b;
            --bg-sidebar: #1e293b;
            --text-main: #f1f5f9;
            --text-sec: #94a3b8;
            --border: #334155;
            --opt-hover: #334155;
            --sidebar-width: 300px;
            --exp-bg: #431407;
            --exp-text: #fdba74;
        }

        /* Ch·∫ø ƒë·ªô s√°ng (n·∫øu th√≠ch) */
        [data-theme="light"] {
            --primary: #4f46e5;
            --bg-body: #f3f4f6;
            --bg-card: #ffffff;
            --bg-sidebar: #ffffff;
            --text-main: #1f2937;
            --text-sec: #6b7280;
            --border: #e5e7eb;
            --opt-hover: #f9fafb;
            --exp-bg: #fff7ed;
            --exp-text: #9a3412;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            color: var(--text-main);
            margin: 0;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, var(--bg-body), #1e1b4b); /* Gradient nh·∫π */
        }

        /* --- APP CONTAINER --- */
        #quiz-app-container {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: row;
            background: var(--bg-body);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #quiz-app-container.active { display: flex; opacity: 1; }

        /* --- LANDING PAGE --- */
        #landing-page {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: #0f172a;
            color: white;
            transition: transform 0.5s ease;
            overflow-y: auto;
        }
        #landing-page.hidden { transform: translateY(-100%); }

        .hero-title {
            font-size: 3rem; font-weight: 800; margin-bottom: 2rem; text-align: center;
            background: -webkit-linear-gradient(120deg, #818cf8, #c084fc);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* Menu ch·ªçn m√¥n */
        #selection-view {
            display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; width: 100%; max-width: 900px;
        }

        .subject-group {
            background: rgba(255,255,255,0.05); padding: 20px; border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1); width: 320px; display: flex; flex-direction: column; gap: 15px;
        }

        .mode-card {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            padding: 20px; border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.2s;
        }
        .mode-card:hover { transform: translateY(-5px); border-color: #818cf8; background: rgba(255,255,255,0.1); }
        .mode-icon { font-size: 2rem; display: block; margin-bottom: 10px; }
        .mode-title { font-weight: 700; margin-bottom: 5px; color: white; }
        .mode-desc { font-size: 0.85rem; color: #cbd5e1; }

        /* --- SIDEBAR --- */
        .sidebar {
            width: var(--sidebar-width); background: var(--bg-sidebar); border-right: 1px solid var(--border);
            display: flex; flex-direction: column; height: 100%; z-index: 1000;
            transition: transform 0.3s ease;
        }
        .sidebar-header { padding: 15px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .sidebar-content { flex: 1; overflow-y: auto; padding: 10px; }
        .question-map { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        
        .map-item {
            aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
            background: var(--bg-body); border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer;
            border: 1px solid var(--border); color: var(--text-sec);
        }
        .map-item.active { border-color: var(--primary); background: rgba(79, 70, 229, 0.2); color: var(--primary); }
        .map-item.correct { background: var(--success); color: white; border-color: var(--success); }
        .map-item.wrong { background: var(--danger); color: white; border-color: var(--danger); }

        /* --- MAIN CONTENT --- */
        .main-content { flex: 1; display: flex; flex-direction: column; position: relative; overflow-y: auto; }
        .top-bar { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; background: var(--bg-card); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        
        .quiz-area { flex: 1; padding: 30px; display: flex; justify-content: center; }
        .quiz-card {
            background: var(--bg-card); padding: 30px; border-radius: 20px; width: 100%; max-width: 800px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border: 1px solid var(--border); height: fit-content;
        }

        .question-text { font-size: 1.3rem; font-weight: 600; margin-bottom: 25px; line-height: 1.5; }
        .option-item {
            background: var(--bg-body); border: 2px solid var(--border); padding: 15px; border-radius: 10px;
            margin-bottom: 10px; cursor: pointer; transition: all 0.2s;
        }
        .option-item:hover:not(.disabled) { border-color: var(--primary); background: var(--opt-hover); }
        .option-item.correct { border-color: var(--success); background: rgba(16, 185, 129, 0.1); color: var(--success); font-weight: bold; }
        .option-item.wrong { border-color: var(--danger); background: rgba(239, 68, 68, 0.1); color: var(--danger); }
        .disabled { pointer-events: none; }

        .explanation { margin-top: 20px; padding: 15px; background: var(--exp-bg); border-radius: 10px; color: var(--exp-text); display: none; border: 1px solid var(--warning); }
        
        .footer-controls { margin-top: 30px; display: flex; justify-content: space-between; }
        .btn { padding: 10px 25px; border-radius: 50px; border: none; font-weight: 600; cursor: pointer; background: var(--primary); color: white; }
        .btn-secondary { background: var(--border); color: var(--text-main); }

        /* --- MOBILE --- */
        .mobile-overlay {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6); z-index: 999; backdrop-filter: blur(3px);
        }
        .menu-toggle { display: none; background: none; border: none; color: var(--text-main); font-size: 1.5rem; cursor: pointer; }

        @media (max-width: 768px) {
            .sidebar { position: fixed; top: 0; left: 0; height: 100%; width: 280px; transform: translateX(-100%); }
            .sidebar.open { transform: translateX(0); }
            .mobile-overlay.active { display: block; }
            .menu-toggle { display: block; }
            .hero-title { font-size: 2rem; }
            .quiz-card { padding: 20px; }
        }
    </style>
</head>
<body>

    <div id="landing-page">
        <div style="text-align: center; padding: 20px;">
            <h1 class="hero-title">√îN T·∫¨P ƒê·∫†I C∆Ø∆†NG</h1>
            <div id="selection-view">
                <div class="subject-group">
                    <div style="color: #fbbf24; font-weight: bold; text-align: center;">üìò TRI·∫æT H·ªåC M√ÅC-L√äNIN</div>
                    <div class="mode-card" onclick="startQuizMode('chapter1')">
                        <span class="mode-icon">üìñ</span>
                        <div class="mode-title">Ch∆∞∆°ng 1</div>
                        <div class="mode-desc">Kh√°i lu·∫≠n & V·∫•n ƒë·ªÅ c∆° b·∫£n</div>
                    </div>
                    <div class="mode-card" onclick="startQuizMode('full')">
                        <span class="mode-icon">üî•</span>
                        <div class="mode-title">Full 182 C√¢u</div>
                        <div class="mode-desc">Ng√¢n h√†ng ƒë·ªÅ thi</div>
                    </div>
                </div>
                <div class="subject-group" style="border-color: rgba(239,68,68,0.3);">
                    <div style="color: #f87171; font-weight: bold; text-align: center;">üáªüá≥ T∆Ø T∆Ø·ªûNG HCM</div>
                    <div class="mode-card" onclick="window.location.href='tutuong.html'" style="border-color: #ef4444;">
                        <span class="mode-icon">‚≠ê</span>
                        <div class="mode-title">Chuy·ªÉn sang m√¥n T∆∞ T∆∞·ªüng</div>
                        <div class="mode-desc">B·∫•m v√†o ƒë√¢y ƒë·ªÉ chuy·ªÉn trang</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="quiz-app-container">
        <div class="mobile-overlay" id="mobile-overlay" onclick="toggleSidebar()"></div>

        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <span style="font-weight: bold;">DANH S√ÅCH C√ÇU H·ªéI</span>
                <button class="menu-toggle" onclick="toggleSidebar()">‚úï</button>
            </div>
            <div class="sidebar-content">
                <button class="btn-secondary" onclick="location.reload()" style="width:100%; padding:10px; margin-bottom:15px; border-radius:8px; cursor:pointer;">üè† V·ªÅ Trang Ch·ªß</button>
                <div class="question-map" id="question-map"></div>
            </div>
        </nav>

        <main class="main-content">
            <div class="top-bar">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <div style="font-weight: bold;" id="score-text">ƒê√∫ng: 0</div>
                <button class="btn-secondary" style="padding: 5px 15px; border-radius: 20px;" onclick="location.reload()">Tho√°t</button>
            </div>

            <div class="quiz-area">
                <div class="quiz-card">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: var(--text-sec);">
                        <span id="q-number">C√ÇU 1</span>
                    </div>
                    <div class="question-text" id="q-text">ƒêang t·∫£i...</div>
                    <div id="options-container"></div>
                    <div class="explanation" id="explanation"></div>
                    
                    <div class="footer-controls">
                        <button class="btn btn-secondary" onclick="prevQ()">‚Üê Tr∆∞·ªõc</button>
                        <button class="btn" onclick="nextQ()">Sau ‚Üí</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

<script>
    // ‚ö†Ô∏è QUAN TR·ªåNG: COPY D·ªÆ LI·ªÜU C·ª¶A BRO V√ÄO GI·ªÆA 2 C√ÅI D·∫§U NGO·∫∂C VU√îNG B√äN D∆Ø·ªöI
    // L∆∞u √Ω: M·ªói c√¢u h·ªèi c√°ch nhau b·ªüi d·∫•u ph·∫©y ,
    
    const chap1Data = [
        {"q":"Tri·∫øt h·ªçc ra ƒë·ªùi v√†o kho·∫£ng th·ªùi gian n√†o v√† ·ªü ƒë√¢u?","a":"Th·∫ø k·ª∑ VIII - VI tr.CN t·∫°i ·∫§n ƒê·ªô, Trung Hoa, Hy L·∫°p","e":"ƒê√°p √°n: Th·∫ø k·ª∑ VIII - VI tr.CN t·∫°i ·∫§n ƒê·ªô, Trung Hoa, Hy L·∫°p"},
        {"q":"V·∫•n ƒë·ªÅ c∆° b·∫£n c·ªßa tri·∫øt h·ªçc l√† g√¨?","a":"M·ªëi quan h·ªá gi·ªØa v·∫≠t ch·∫•t v√† √Ω th·ª©c","e":"ƒê√°p √°n: M·ªëi quan h·ªá gi·ªØa v·∫≠t ch·∫•t v√† √Ω th·ª©c"}
        // ... Bro d√°n ti·∫øp c√°c c√¢u kh√°c v√†o ƒë√¢y nh·ªõ c√≥ d·∫•u ph·∫©y nh√©
    ];

    const fullData = [
        {"q": "Ai l√† ng∆∞·ªùi ƒë∆∞a ra ƒë·ªãnh nghƒ©a v·ªÅ v·∫≠t ch·∫•t?","a": "V.I.L√™nin","e": "ƒê√°p √°n ch√≠nh x√°c l√†: V.I.L√™nin."},
        {"q": "Ch·ªß nghƒ©a M√°c ra ƒë·ªùi v√†o th·ªùi gian n√†o?","a": "Nh·ªØng nƒÉm 40 c·ªßa th·∫ø k·ª∑ XIX","e": "ƒê√°p √°n: Nh·ªØng nƒÉm 40 c·ªßa th·∫ø k·ª∑ XIX"}
        // ... D√°n full 182 c√¢u c·ªßa bro v√†o ƒë√¢y
    ];

    // --- LOGIC X·ª¨ L√ù (KH√îNG C·∫¶N S·ª¨A D∆Ø·ªöI N√ÄY) ---
    let quizData = [];
    let currentIdx = 0;
    let score = 0;
    let userAnswers = [];

    function startQuizMode(mode) {
        if (mode === 'chapter1') quizData = [...chap1Data];
        else quizData = [...fullData];

        // Ki·ªÉm tra n·∫øu d·ªØ li·ªáu r·ªóng (ƒë·ªÉ tr√°nh l·ªói ƒëang t·∫£i)
        if (!quizData || quizData.length === 0) {
            alert("Ch∆∞a c√≥ d·ªØ li·ªáu c√¢u h·ªèi! Bro nh·ªõ copy data v√†o file index.html nh√©.");
            return;
        }

        // Tr·ªôn c√¢u h·ªèi v√† ƒë√°p √°n
        quizData = quizData.sort(() => Math.random() - 0.5).map(q => {
            // T·∫°o ƒë√°p √°n gi·∫£ t·ª´ c√°c c√¢u kh√°c
            let allA = quizData.map(i => i.a);
            let wrongs = allA.filter(a => a !== q.a).sort(() => Math.random() - 0.5).slice(0,3);
            return {
                ...q,
                options: [q.a, ...wrongs].sort(() => Math.random() - 0.5)
            };
        });

        userAnswers = new Array(quizData.length).fill(null);
        document.getElementById('landing-page').classList.add('hidden');
        document.getElementById('quiz-app-container').classList.add('active');
        
        renderSidebar();
        loadQuestion(0);
    }

    function renderSidebar() {
        const map = document.getElementById('question-map');
        map.innerHTML = '';
        quizData.forEach((_, i) => {
            let btn = document.createElement('div');
            btn.className = 'map-item';
            btn.textContent = i + 1;
            btn.id = `map-${i}`;
            btn.onclick = () => {
                loadQuestion(i);
                if(window.innerWidth < 768) toggleSidebar(); // ƒê√≥ng menu tr√™n mobile
            };
            map.appendChild(btn);
        });
    }

    function loadQuestion(idx) {
        currentIdx = idx;
        const q = quizData[idx];
        document.getElementById('q-number').textContent = `C√ÇU ${idx + 1}/${quizData.length}`;
        document.getElementById('q-text').textContent = q.q;
        
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        document.getElementById('explanation').style.display = 'none';

        q.options.forEach(opt => {
            let btn = document.createElement('div');
            btn.className = 'option-item';
            btn.textContent = opt;
            
            if (userAnswers[idx]) {
                btn.classList.add('disabled');
                if (opt === q.a) btn.classList.add('correct');
                else if (opt === userAnswers[idx]) btn.classList.add('wrong');
                
                if(userAnswers[idx]) {
                    document.getElementById('explanation').innerHTML = q.e;
                    document.getElementById('explanation').style.display = 'block';
                }
            } else {
                btn.onclick = () => checkAnswer(opt, q.a, idx);
            }
            container.appendChild(btn);
        });

        updateSidebar();
    }

    function checkAnswer(selected, correct, idx) {
        userAnswers[idx] = selected;
        if (selected === correct) score++;
        document.getElementById('score-text').textContent = `ƒê√∫ng: ${score}`;
        loadQuestion(idx);
    }

    function updateSidebar() {
        quizData.forEach((q, i) => {
            let item = document.getElementById(`map-${i}`);
            item.className = 'map-item';
            if (i === currentIdx) item.classList.add('active');
            else item.classList.remove('active');
            
            if (userAnswers[i]) {
                item.classList.add(userAnswers[i] === q.a ? 'correct' : 'wrong');
            }
        });
    }

    function nextQ() { if (currentIdx < quizData.length - 1) loadQuestion(currentIdx + 1); }
    function prevQ() { if (currentIdx > 0) loadQuestion(currentIdx - 1); }

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('open');
        document.getElementById('mobile-overlay').classList.toggle('active');
    }
</script>
</body>
</html>
